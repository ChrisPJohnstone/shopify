fragment OrderInfo on Order {
  id
  createdAt
  lineItems(first: 250) {
    nodes {
      id
      variant {
        id
        # Name of product
        displayName
      }
      # Price before discounts
      originalTotalSet {
        presentmentMoney {
          amount
        }
      }
      # Approximate price with discounts
      discountedUnitPriceAfterAllDiscountsSet {
        presentmentMoney {
          amount
        }
      }
    }
  }
  # Transaction fees
  transactions(first: 250) {
    fees {
      amount {
        amount
      }
    }
  }
}

query OrdersOfInventoryItem(
  $pageSize: Int!,
  $cursor: String,
  $query: String
) {
  orders(
    first: $pageSize,
    after: $cursor,
    query: $query
  ) {
    nodes {
      ...OrderInfo
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}
